# Neural DSL Feature Configuration
# Control which features are enabled in the unified server

# Core features - Always enabled, minimal dependencies
core:
  parser: true          # DSL parsing and compilation
  code_generation: true # Backend code generation (TF, PyTorch, ONNX)
  shape_propagation: true # Shape validation
  cli: true            # Command-line interface

# Extended features - Useful but optional
extended:
  debug_dashboard: true    # NeuralDbg real-time monitoring (Port 8050/debug)
  hpo: true               # Hyperparameter optimization with Optuna
  automl: true            # Neural architecture search
  integrations: false     # Cloud platform integrations (AWS, GCP, Azure)
  teams: false           # Multi-tenancy, RBAC, quotas
  
# Experimental features - High complexity, consider separate repos
experimental:
  nocode_builder: true    # No-code visual model builder (Port 8050/build)
  monitoring: true        # Production monitoring dashboard (Port 8050/monitor)
  collaboration: false    # Real-time collaborative editing (Port 8080)
  marketplace: false      # Model marketplace and sharing
  aquarium: false        # Full IDE experience
  federated: false       # Federated learning infrastructure

# Server configuration
server:
  unified:
    enabled: true       # Use unified server (recommended)
    host: localhost
    port: 8050
  
  # Legacy separate servers (deprecated)
  legacy:
    dashboard_port: 8050
    nocode_port: 8051
    monitoring_port: 8052
    api_port: 8000
    collaboration_port: 8080

# Installation profiles
profiles:
  minimal:
    # Only core features, minimal dependencies
    includes: [parser, code_generation, shape_propagation, cli]
    install_command: "pip install -e ."
  
  standard:
    # Core + useful extended features
    includes: [parser, code_generation, shape_propagation, cli, debug_dashboard, hpo, automl]
    install_command: "pip install -e \".[full]\""
  
  dev:
    # Everything including experimental
    includes: [parser, code_generation, shape_propagation, cli, debug_dashboard, hpo, 
               automl, integrations, teams, nocode_builder, monitoring]
    install_command: "pip install -e \".[full]\" && pip install -r requirements-dev.txt"

# Feature dependencies
dependencies:
  debug_dashboard:
    required: [dash, plotly, flask]
    optional: [psutil, pysnooper]
  
  nocode_builder:
    required: [dash, dash-bootstrap-components, plotly]
  
  monitoring:
    required: [dash, plotly]
    optional: [prometheus-client]
  
  hpo:
    required: [optuna, scikit-learn]
  
  automl:
    required: [optuna, scikit-learn, scipy]
    optional: [ray, dask]
  
  collaboration:
    required: [websockets, aiohttp]
  
  marketplace:
    required: [requests, pyyaml]
  
  aquarium:
    required: [fastapi, uvicorn, websockets]
  
  federated:
    required: [numpy, pyyaml]
    optional: [grpc, cryptography]

# Deprecation notices
deprecated:
  - feature: separate_servers
    message: "Running separate servers on different ports is deprecated. Use unified server instead."
    migration: "Use 'neural server start' instead of running individual dashboard scripts."
    removal_version: "0.4.0"
  
  - feature: aquarium_standalone
    message: "Aquarium IDE will be extracted to separate repository."
    migration: "Install neural-aquarium package separately."
    removal_version: "0.4.0"
  
  - feature: marketplace_standalone
    message: "Marketplace will be extracted to separate repository."
    migration: "Install neural-marketplace package separately."
    removal_version: "0.4.0"
